---
title: "Performance of Rookie Can Predict Price of Their Rookie Prizm Silver Cards"
subtitle: "My subtitle if needed"
author: 
  - Harrison Huang
thanks: "Code and data are available at: https://github.com/lemonface88/NBA"
date: today 
date-format: long
abstract: "Collecting and investing in cards has been relevant for a while now. There are complex factors that contribute to the price fluxation of these cards. This analysis will use player statistics to create a model to try to grasp possible future price trends of the card. A xxx model was used in this analysis. The results indicated that xxx is a strong indicator of the price fluctuation of potential future prices of the rookie card."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(arrow)
library(here)
library(palmerpenguins)
library(knitr)
library(rstanarm)


# load data
anthony_edward = read_csv(
  file = "/Users/harrison/NBA/data/analysis_data/clean_anthony_edward.csv",
  show_col_types = FALSE
)

haliburton = read_csv(
  file = "/Users/harrison/NBA/data/analysis_data/clean_haliburton.csv",
  show_col_types = FALSE
)

maxey = read_csv(
  file = "/Users/harrison/NBA/data/analysis_data/clean_maxey.csv",
  show_col_types = FALSE
)

price_data = read_csv(
  file = "/Users/harrison/NBA/data/analysis_data/clean_price_data.csv",
  show_col_types = FALSE
)
```



# Introduction

Collectible cards such as Pokemon, Yu-Gi-Oh! cards, and Sports cards still exist and are relevant in our world. In the digitized world we live in today, these physical cards are often forgotten. We have also heard wild stories about specific Pokemon cards selling for millions of dollars, the same applies to other collectible cards. NBA basketball cards have gained significant popularity in recent years. Apart from being collector's items, they have also become a form of investment for some individuals. 

Many factors go into the valuation of a basketball card. Some example factors include the rarity of the card, the performance and popularity of the player, which series it comes from, and the condition of the card. Each year, the cards are updated and RC labeled cards are labeled on the players that are rookies for that year. These RC-labeled cards are only printed in that specific year and are usually the most sought-after cards among collectors. The specific stats of each player such as points per game, rebounds, and turnover also dictate the valuation of their rookie cards. The complexity of these elements often makes it difficult to predict the future value of the card.

This analysis finds that….



	In Section 2 of the paper, the source and datasets are discussed. Strengths and weaknesses, methods of collection, and terminologies will be explored. Section 3 of the paper will incorporate a model aiming to use player statistics to predict the price trend of the card. Section 4 will then look at the results from the model. Lastly, section 5 will be a reflection about possible steps and the discussion of the strengths and weaknesses of this analysis. 


# Data

Data used here are unmanipulated data, simply created by graph functions with the data sets.

The first place the data was collected from is ESPN API, player statistics were obtained from scrapping the website and picking out the right tables. Please be respectful if you decide to use it for any other purpose. Each player had multiple tables and I downloaded the tables and merged players’ 202202-2023 and 2023-2024 data. This allows all statistics to be viewed in one table. In addition, when considering which of the statistics to focus on, I asked an NBA reporter Lisa Kao for suggestions. She mentioned that average points, blocks, steals, and assists are the top 5 statistics focused on in the industry.

The second source of the data came from Sportscardpro website. They collect data from eBay's successful transactions of the card and gather them onto their website. Since there was no table to download the data, I had to manually create an Excel file with the data presented on the website and then import it into rStudio. The price focuses on the PSA 10 and Prizm Silver series of that specific player's rookie card. 

The analysis of these three datasets will be carried out using the statistical programming language `R` [@citeR], using the `tidyverse`[@citetidy], `here`[@citehere], and `readxl`[@citexl] packages. The figures and tables in the paper are generated using the, respectively, `ggplot2`[@citegg] and `knitr`[@citeknitr] packages.


## Player Statistics

Below is a brief explination of the tables including player statistics:

1. The `REB` column refers to the number of rebounds the player average per game in that month.
2. The `AST` column refers to the number of assists the player average per game in that month.
3. The `BLK` column refers to the number of blocks the player average per game in that month.
4. The `STL` column refers to the number of steals the player average per game in that month.
5. The `PTS` column refers to the number of points the player average per game in that month.


```{r}
#| label: tbl-1
#| tbl-cap: The data set containing player statistics of Anthon Edward from 2022 to 2024
#| echo: false
#| warning: false

head(anthony_edward, padding = 5)
```

```{r}
#| label: tbl-2
#| tbl-cap: The data set containing player statistics of Tyrese Maxey from 2022 to 2024
#| echo: false
#| warning: false

head(anthony_edward, padding = 5)
```

```{r}
#| label: tbl-3
#| tbl-cap: The data set containing player statistics of Tyrese Haliburton from 2022 to 2024
#| echo: false
#| warning: false

head(anthony_edward, padding = 5)
```

 @tbl-1, @tbl-2, and  @tbl-3 are the three player statistics data that will be used in the model. 

## Card Price statistics 

```{r}
#| label: tbl-4
#| tbl-cap: This table is the Prizm Silver RC card price monthly from 2022 season to the end of 2023 season. 
#| echo: false
#| warning: false

head(price_data, padding = 5)
```

The table above @tbl-4 includes card price. The player card price is from a website called Sportscardpro, they collect data from eBay's successful transactions of the card and gather them onto their website. Since there was no table to download the data, I had to manually create an Excel file with the data presented on the website and then import it into rStudio. The price focuses on the PSA 10 and Prizm Silver series of that specific player's rookie card.


# Model


The goal of this paper's modelling strategy is to investigate the effect that average player statistics has on their price of the PSA 10 Prizm Silver rookie card. Since we expect the relationship to be positively related, if a player plays better, the price of their Rookie Card should increase, therefore we will use a linear regression model. 
I will use the model to make potential prediction of the upcoming price of the player card based on their current statistics and price data. 


## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.  

\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}

We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.

## Model preduction

```{r}
#| echo: false
#| warning: false

test_maxey <- tibble(
  REB = c(
    4.5, 4.3, 5.1, 3.1, 4.5, 5.6, 7.8, 4.5, 6.5, 4.1, 4.3, 6.5, 5.8, 5.5
  ),
  AST = c(
    4.5, 4.3, 5.1, 3.1, 4.5, 5.6, 7.8, 4.5, 6.5, 4.1, 4.3, 6.5, 5.8, 5.5
  ),
  BLK = c(
    4.5, 4.3, 5.1, 3.1, 4.5, 5.6, 7.8, 4.5, 6.5, 4.1, 4.3, 6.5, 5.8, 5.5
  ),
  STL = c(
    4.5, 4.3, 5.1, 3.1, 4.5, 5.6, 7.8, 4.5, 6.5, 4.1, 4.3, 6.5, 5.8, 5.5
  ),
  PTS = c(
    20, 25, 40, 30, 45, 20, 30, 35, 20, 15, 35, 30, 35, 20 
  )
)

view(test_maxey)

maxey_prediction <- predict(maxey_model, newdata = test_maxey)

```


```{r}
#| label: tbl-5
#| tbl-cap: This table is the prediction price of Tyrese Maxey RC Prizm Silver card using the model 
#| echo: false
#| warning: false

kable(maxey_prediction, padding = 5)

view(maxey_prediction)
```



### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.


# Results

## Average player statistics 

## Price trend ratio to player average



# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included. More player should be added into this analysis and 



\newpage

\appendix

# Appendix

## Model Check

```{r}
library(rstanarm)

pp_check(maxey_model) +
  theme_classic() +
  theme(legend.position = "bottom")

posterior_vs_prior(maxey_model) +
  theme_minimal() +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom") +
  coord_flip()
```


\newpage


# References


